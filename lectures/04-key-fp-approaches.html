<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title>Основни подходи при ФП</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="reveal-js/dist/reset.css">
  <link rel="stylesheet" href="reveal-js/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="reveal-js/dist/theme/white.css" id="theme">
  <link rel="stylesheet" href="theme/theme.css"/>
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Основни подходи при ФП</h1>
</section>

<section id="за-какво-ще-говорим" class="slide level1">
<h1>За какво ще говорим</h1>
<div>
<ul>
<li class="fragment">Рекурсия
<ul>
<li class="fragment">Опашкова рекурсия, практични примери</li>
</ul></li>
<li class="fragment">Функциите като първокласни обекти
<ul>
<li class="fragment">ламбда фунцкии и функционален тип</li>
<li class="fragment">Функции от по-висок ред - <code>map</code>, <code>filter</code>, <code>fold</code> и други</li>
<li class="fragment">Currying - защо и кои са средствата, които Скала ни дава</li>
</ul></li>
<li class="fragment">Композиция на функции</li>
<li class="fragment">Неизменимост и неизменими структури от данни</li>
<li class="fragment">Изразяване чрез типове</li>
</ul>
</div>
</section>
<section id="но-преди-това" class="slide level1">
<h1>Но преди това</h1>
<p>По-предния път пропуснахме темата за модели на изчисление</p>
</section>
<section id="модел-на-изчисление" class="slide level1">
<h1>Модел на изчисление</h1>
<p class="fragment">
Колко от вас са учили СЕП?
</p>
</section>
<section id="substitution-model-операционна-семантика" class="slide level1">
<h1>Substitution model (операционна семантика)</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">max</span><span class="op">(</span>a<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> b<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=</span> <span class="cf">if</span> a <span class="op">&gt;</span> b <span class="cf">then</span> a <span class="cf">else</span> b</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span><span class="op">(</span><span class="dv">3</span> <span class="op">*</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span> <span class="op">*</span> <span class="dv">3</span><span class="op">)</span></span></code></pre></div>
</section>
<section id="предаване-на-параметрите-по-стойност" class="slide level1">
<h1>Предаване на параметрите по стойност</h1>
<div>
<ul>
<li class="fragment"><code>max(3 * 4, 2 * 3)</code></li>
<li class="fragment"><code>max(12, 6)</code></li>
<li class="fragment"><code>if 12 &gt; 6 then 12 else 6</code></li>
<li class="fragment"><code>if true then 12 else 6</code></li>
<li class="fragment"><code>12</code></li>
</ul>
</div>
</section>
<section id="предаване-на-параметрите-по-име" class="slide level1">
<h1>Предаване на параметрите по име</h1>
<div>
<ul>
<li class="fragment"><code>max(3 * 4, 2 * 3)</code></li>
<li class="fragment"><code>if (3 * 4) &gt; (2 * 3) then (3 * 4) else (2 * 3)</code></li>
<li class="fragment"><code>if (12) &gt; (6) then (3 * 4) else (2 * 3)</code></li>
<li class="fragment"><code>if true then (3 * 4) else (2 * 3)</code></li>
<li class="fragment"><code>3 * 4</code></li>
<li class="fragment"><code>12</code></li>
</ul>
</div>
</section>
<section id="предаване-на-параметрите-по-име-1" class="slide level1">
<h1>Предаване на параметрите по име</h1>
<div class="sourceCode" id="cb2"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">max</span><span class="op">(</span>a<span class="op">:</span> <span class="op">=&gt;</span> <span class="dt">Int</span><span class="op">,</span> b<span class="op">:</span> <span class="op">=&gt;</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=</span> <span class="cf">if</span> a <span class="op">&gt;</span> b <span class="cf">then</span> a <span class="cf">else</span> b</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span><span class="op">(</span><span class="dv">3</span> <span class="op">*</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">2</span> <span class="op">*</span> <span class="dv">3</span><span class="op">)</span></span></code></pre></div>
</section>
<section id="предаване-на-параметрите-по-име-2" class="slide level1">
<h1>Предаване на параметрите по име</h1>
<div class="sourceCode" id="cb3"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="op">||(</span>a<span class="op">:</span> <span class="dt">Boolean</span><span class="op">,</span> b<span class="op">:</span> <span class="op">=&gt;</span> <span class="dt">Boolean</span><span class="op">):</span> <span class="dt">Boolean</span> <span class="op">=</span> <span class="cf">if</span> a <span class="cf">then</span> <span class="kw">true</span> <span class="cf">else</span> b</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="op">||(</span><span class="kw">true</span><span class="op">,</span> <span class="op">{</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">println</span><span class="op">(</span><span class="st">&quot;Won&#39;t be printed&quot;</span><span class="op">)</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">false</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="op">})</span> <span class="co">// true</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="op">||(</span><span class="kw">false</span><span class="op">,</span> <span class="op">{</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">println</span><span class="op">(</span><span class="st">&quot;Will be printed&quot;</span><span class="op">)</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">false</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="op">})</span> <span class="co">// false</span></span></code></pre></div>
</section>
<section id="предаване-на-параметрите-по-име-3" class="slide level1">
<h1>Предаване на параметрите по име</h1>
<div class="sourceCode" id="cb4"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">describeByValue</span><span class="op">(</span>items<span class="op">:</span> <span class="bu">List</span><span class="op">[</span><span class="dt">Int</span><span class="op">],</span> evaluation<span class="op">:</span> <span class="dt">Int</span><span class="op">):</span> String <span class="op">=</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> items<span class="op">.</span>isEmpty <span class="cf">then</span> <span class="st">&quot;No items available&quot;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="ss">s&quot;</span><span class="st">Items: </span><span class="ss">${</span>items<span class="op">.</span><span class="fu">mkString</span><span class="op">(</span><span class="st">&quot;, &quot;</span><span class="op">)</span><span class="ss">}</span><span class="st"> are evaluated to </span><span class="ss">$evaluation&quot;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">describeByName</span><span class="op">(</span>items<span class="op">:</span> <span class="bu">List</span><span class="op">[</span><span class="dt">Int</span><span class="op">],</span> evaluation<span class="op">:</span> <span class="op">=&gt;</span> <span class="dt">Int</span><span class="op">):</span> String <span class="op">=</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> items<span class="op">.</span>isEmpty <span class="cf">then</span> <span class="st">&quot;No items available&quot;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="ss">s&quot;</span><span class="st">Items: </span><span class="ss">${</span>items<span class="op">.</span><span class="fu">mkString</span><span class="op">(</span><span class="st">&quot;, &quot;</span><span class="op">)</span><span class="ss">}</span><span class="st"> are evaluated to </span><span class="ss">$evaluation&quot;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">avg</span><span class="op">(</span>xs<span class="op">:</span> <span class="bu">List</span><span class="op">[</span><span class="dt">Int</span><span class="op">])</span> <span class="op">=</span> xs<span class="op">.</span>sum <span class="op">/</span> xs<span class="op">.</span>size</span></code></pre></div>
<div class="fragment">
<div class="sourceCode" id="cb5"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> someItems <span class="op">=</span> <span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">)</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describeByName</span><span class="op">(</span>someItems<span class="op">,</span> <span class="fu">avg</span><span class="op">(</span>someItems<span class="op">))</span> <span class="co">// Items: 1, 2, 3 are evaluated to 2</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">describeByValue</span><span class="op">(</span>someItems<span class="op">,</span> <span class="fu">avg</span><span class="op">(</span>someItems<span class="op">))</span> <span class="co">// Items: 1, 2, 3 are evaluated to 2</span></span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb6"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> noItems <span class="op">=</span> <span class="bu">List</span><span class="op">.</span>empty<span class="op">[</span><span class="dt">Int</span><span class="op">]</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describeByName</span><span class="op">(</span>noItems<span class="op">,</span> <span class="fu">avg</span><span class="op">(</span>noItems<span class="op">))</span> <span class="co">// No items available</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">describeByValue</span><span class="op">(</span>noItems<span class="op">,</span> <span class="fu">avg</span><span class="op">(</span>noItems<span class="op">))</span> <span class="co">// java.lang.ArithmeticException: / by zero</span></span></code></pre></div>
</div>
</section>
<section id="защо-ни-е-нужно-по-име" class="slide level1">
<h1>Защо ни е нужно по име?</h1>
<div>
<ul>
<li class="fragment"><p>short circuiting и собствени контролни структури</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>fastComputation orElse longComputation</span></code></pre></div></li>
<li class="fragment"><p>Отлагане на изчисления</p>
<ul>
<li class="fragment">безкрайни структури от данни</li>
<li class="fragment">изпълнение по-късно или в друга нишка</li>
</ul></li>
<li class="fragment"><p>Повторно изпълнение на изрази със странични ефекти</p></li>
</ul>
</div>
</section>
<section id="модел-на-изчисление-в-haskell" class="slide level1">
<h1>Модел на изчисление в Haskell</h1>
<div class="sourceCode" id="cb8"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">squared</span><span class="op">(</span>n<span class="op">:</span> <span class="op">=&gt;</span> <span class="dt">Int</span><span class="op">):</span> <span class="dt">Int</span> <span class="op">=</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">lazy</span> <span class="kw">val</span> nValue <span class="op">=</span> n</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  nValue <span class="op">*</span> nValue</span></code></pre></div>
</section>
<section id="рекурсия" class="slide level1">
<h1>Рекурсия</h1>
<div>
<ul>
<li class="fragment"><p>Функция, която извиква себе си</p>
<p><img data-src="images/04-key-fp-approaches/captain-obvious.jpg" class="fragment" height="200" /></p></li>
<li class="fragment"><p>Използва се за постигане на цикличност. Често срещано във ФП</p></li>
<li class="fragment"><p>Избягва мутиране на състояние</p></li>
<li class="fragment"><p>По-естествен начин за описване на определени алгоритми. Пример - fact</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">fact</span><span class="op">(</span>n<span class="op">:</span> <span class="dt">Int</span><span class="op">):</span> <span class="dt">Int</span> <span class="op">=</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> n <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">then</span> <span class="dv">1</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> n <span class="op">*</span> <span class="fu">fact</span><span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">)</span></span></code></pre></div></li>
</ul>
</div>
</section>
<section id="примери" class="slide level1">
<h1>Примери</h1>
<div class="sourceCode" id="cb10"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">sum</span><span class="op">(</span>l<span class="op">:</span> <span class="bu">List</span><span class="op">[</span><span class="dt">Int</span><span class="op">]):</span> <span class="dt">Int</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> size<span class="op">[</span>A<span class="op">](</span>l<span class="op">:</span> <span class="bu">List</span><span class="op">[</span>A<span class="op">]):</span> <span class="dt">Int</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">fibonacci</span><span class="op">(</span>i<span class="op">:</span> <span class="dt">Int</span><span class="op">):</span> <span class="dt">Int</span></span></code></pre></div>
</section>
<section id="unfolding-the-recursion" class="slide level1">
<h1>Unfolding the recursion</h1>
<div>
<ul>
<li class="fragment"><p>Използвайки substitution model</p>
<pre><code>fact(5)
--
5 * fact(5 - 1) =
--
5 * fact(4) =
--
5 * (4 * fact(4 - 1)) =
--
5 * (4 * fact(3)) =
--
5 * (4 * (3 * fact(3 - 1))) =
--
5 * (4 * (3 * fact(2))) =
--
5 * (4 * (3 * (2 * fact(2 - 1)))) =
--
5 * (4 * (3 * (2 * fact(1)))) =
--
5 * (4 * (3 * (2 * 1)))</code></pre></li>
<li class="fragment"><p>ако извикаме функцията с <code>Int.MaxValue</code> ще получим <code>java.lang.StackOverflowError</code></p></li>
</ul>
</div>
</section>
<section id="опашкова-рекурсия-tail-recursion" class="slide level1">
<h1>Опашкова рекурсия (tail recursion)</h1>
<div>
<blockquote>
<p>“A recursive function is tail recursive when recursive call is the last thing executed by the function.”</p>
</blockquote>
</div>
</section>
<section id="примери-1" class="slide level1">
<h1>Примери</h1>
<div>
<div class="sourceCode" id="cb12"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">fact</span><span class="op">(</span>n<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> acc<span class="op">:</span> <span class="dt">Int</span> <span class="op">=</span> <span class="dv">1</span><span class="op">):</span> <span class="dt">Int</span> <span class="op">=</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> n <span class="op">&lt;=</span> <span class="dv">1</span> <span class="cf">then</span> acc</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">fact</span><span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">,</span> acc <span class="op">*</span> n<span class="op">)</span></span></code></pre></div>
<div class="fragment">
<p>И какво от това?</p>
</div>
</div>
</section>
<section id="как-изглежда-стека-тогава" class="slide level1">
<h1>Как изглежда стека тогава?</h1>
<pre><code>fact(5, 1)
--
fact(5 - 1, 5 * 1) =
--
fact(4, 5) =
--
fact(4 - 1, 5 * 4) =
--
fact(3, 20) =
--
fact(3 - 1, 20 * 3) =
--
fact(2, 60) =
--
fact(2 - 1, 60 * 2) =
--
fact(1, 120) =
--
120</code></pre>
</section>
<section id="ето-какво" class="slide level1">
<h1>Ето какво</h1>
<div>
<ul>
<li class="fragment">Няма нужда да пазим променливи в стека от предните извиквания</li>
<li class="fragment">“Tail recursive” функциите могат да бъдат оптимизирани от компилатора</li>
<li class="fragment">accumulator подход</li>
<li class="fragment"><span class="citation" data-cites="tailrec">@tailrec</span></li>
</ul>
</div>
</section>
<section id="още-примери" class="slide level1">
<h1>Още примери</h1>
<p>Нека преправим предните примери с опашкова рекурсия</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">sum</span><span class="op">(</span>l<span class="op">:</span> <span class="bu">List</span><span class="op">[</span><span class="dt">Int</span><span class="op">]):</span> <span class="dt">Int</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> size<span class="op">[</span>A<span class="op">](</span>l<span class="op">:</span> <span class="bu">List</span><span class="op">[</span>A<span class="op">]):</span> <span class="dt">Int</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">fibonacci</span><span class="op">(</span>i<span class="op">:</span> <span class="dt">Int</span><span class="op">):</span> <span class="dt">Int</span></span></code></pre></div>
</section>
<section id="обхождане-на-списък" class="slide level1">
<h1>Обхождане на списък</h1>
<ul>
<li>drop</li>
<li>reverse</li>
<li>take</li>
<li>nth element</li>
<li>concat</li>
</ul>
</section>
<section id="функциите-като-първокласни-обекти" class="slide level1">
<h1>Функциите като първокласни обекти</h1>
<div>
<ul>
<li class="fragment">Какво означава това?
<ul>
<li class="fragment">Могат да се използват навсякъде както бихме използвали “нормални” стойности</li>
<li class="fragment">Няма ограничение къде могат да бъдат дефинирани, т.е. като “нормални” стойности</li>
<li class="fragment">Типа им се описва подобно на “нормалните” стойности</li>
</ul></li>
<li class="fragment">В Scala има Function literals - анонимни функции (ламбда)</li>
</ul>
</div>
</section>
<section id="анонимни-функции-a.k.a-lambda" class="slide level1">
<h1>Анонимни функции, a.k.a lambda</h1>
<p>Синтаксис</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> lambdaName <span class="op">=</span> <span class="op">(</span>param<span class="op">:</span> Type<span class="op">)</span> <span class="op">=&gt;</span> expression</span></code></pre></div>
<div class="fragment">
<div class="sourceCode" id="cb16"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> addOne <span class="op">=</span> <span class="op">(</span>x<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> x <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sum <span class="op">=</span> <span class="op">(</span>x<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> y<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> x <span class="op">+</span> y</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">// или така</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> addOne<span class="op">:</span> <span class="dt">Int</span> <span class="op">=&gt;</span> <span class="dt">Int</span> <span class="op">=</span> x <span class="op">=&gt;</span> x <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sum<span class="op">:</span> <span class="op">(</span><span class="dt">Int</span><span class="op">,</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> <span class="dt">Int</span> <span class="op">=</span> <span class="op">(</span>x<span class="op">,</span> y<span class="op">)</span> <span class="op">=&gt;</span> x <span class="op">+</span> y</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">// Извикват се по стандартния начин</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="fu">addOne</span><span class="op">(</span><span class="dv">41</span><span class="op">)</span> <span class="co">// 42</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span><span class="op">(</span><span class="dv">40</span><span class="op">,</span> <span class="dv">2</span><span class="op">)</span> <span class="co">// 42</span></span></code></pre></div>
</div>
</section>
<section id="функционален-тип" class="slide level1">
<h1>Функционален тип</h1>
<div>
<ul>
<li class="fragment"><p>Функциите са обекти, които също си имат тип.</p></li>
<li class="fragment"><p>Когато дефинираме следната функция</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> lessThan <span class="op">=</span> <span class="op">(</span>a<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> b<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> a <span class="op">&lt;</span> b</span></code></pre></div></li>
<li class="fragment"><p>всъщност се дефинира обект от тип <code>Function2</code> с метод <code>apply</code></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> lessThan <span class="op">=</span> <span class="kw">new</span> Function2<span class="op">[</span><span class="dt">Int</span><span class="op">,</span> <span class="dt">Int</span><span class="op">,</span> <span class="dt">Boolean</span><span class="op">]:</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">apply</span><span class="op">(</span>a<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> b<span class="op">:</span> <span class="dt">Int</span><span class="op">):</span> <span class="dt">Boolean</span> <span class="op">=</span> a <span class="op">&lt;</span> b</span></code></pre></div></li>
<li class="fragment"><p><code>Function2</code> e нормален <code>trait</code> - репрезентира функции на два аргумента</p></li>
<li class="fragment"><p>Съществуват подобни за функции на различен брой аргументи - <code>Function0</code> … <code>Function22</code></p></li>
</ul>
</div>
</section>
<section id="apply---от-предния-път" class="slide level1">
<h1>apply? - от предния път</h1>
<div>
<ul>
<li class="fragment">Метод <code>apply</code> е специален. Обектите, които го имат могат да бъдат извиквани като функции</li>
</ul>
<div class="fragment">
<div class="sourceCode" id="cb19"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="fu">Adder</span><span class="op">(</span>a<span class="op">:</span> <span class="dt">Int</span><span class="op">):</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">apply</span><span class="op">(</span>b<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=</span> a <span class="op">+</span> b</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> oneAdder <span class="op">=</span> <span class="kw">new</span> <span class="fu">Adder</span><span class="op">(</span><span class="dv">1</span><span class="op">)</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">oneAdder</span><span class="op">(</span><span class="dv">2</span><span class="op">)</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">// res2: Int = 3</span></span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">makeAdder</span><span class="op">(</span>a<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=</span> <span class="op">(</span>b<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> a <span class="op">+</span> b</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> oneAdder <span class="op">=</span> <span class="fu">makeAdder</span><span class="op">(</span><span class="dv">1</span><span class="op">)</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">oneAdder</span><span class="op">(</span><span class="dv">2</span><span class="op">)</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">// res2: Int = 3</span></span></code></pre></div>
</div>
</div>
</section>
<section id="eta-expansion" class="slide level1">
<h1>Eta expansion</h1>
<p>Преобразуване на метод към функция</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">sum</span><span class="op">(</span>a<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> b<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=</span> a <span class="op">+</span> b</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sumFun <span class="op">=</span> sum  <span class="co">// doesn&#39;t work, will work in Scala 3</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sumFun <span class="op">=</span> sum _  <span class="co">// works</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sumFun<span class="op">:</span> <span class="op">(</span><span class="dt">Int</span><span class="op">,</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> <span class="dt">Int</span> <span class="op">=</span> sum   <span class="co">// also works</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sumFun2<span class="op">:</span> Function2<span class="op">[</span><span class="dt">Int</span><span class="op">,</span> <span class="dt">Int</span><span class="op">,</span> <span class="dt">Int</span><span class="op">]</span> <span class="op">=</span> sum   <span class="co">// also works</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="fu">sumFun</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">)</span></span></code></pre></div>
</section>
<section id="partial-application" class="slide level1">
<h1>Partial application</h1>
<div class="sourceCode" id="cb22"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> addOne <span class="op">=</span> <span class="fu">sum</span><span class="op">(</span>_<span class="op">,</span> <span class="dv">1</span><span class="op">)</span></span></code></pre></div>
<p>Типът на <code>addOne</code> е <code>Int =&gt; Int</code></p>
<div class="fragment">
<div class="sourceCode" id="cb23"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">wrap</span><span class="op">(</span>prefix<span class="op">:</span> String<span class="op">,</span> html<span class="op">:</span> String<span class="op">,</span> suffix<span class="op">:</span> String<span class="op">)</span> <span class="op">=</span> prefix <span class="op">+</span> html <span class="op">+</span> suffix</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> wrapWithP <span class="op">=</span> <span class="fu">wrap</span><span class="op">(</span><span class="st">&quot;&lt;p&gt;&quot;</span><span class="op">,</span> _<span class="op">,</span> <span class="st">&quot;&lt;/p&gt;&quot;</span><span class="op">)</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> wrapWithDiv <span class="op">=</span> <span class="fu">wrap</span><span class="op">(</span><span class="st">&quot;&lt;div&gt;&quot;</span><span class="op">,</span> _<span class="op">,</span> <span class="st">&quot;&lt;/div&gt;&quot;</span><span class="op">)</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="fu">wrapWithDiv</span><span class="op">(</span><span class="fu">wrapWithP</span><span class="op">(</span><span class="st">&quot;Hello, world&quot;</span><span class="op">))</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co">// res3: String = &quot;&lt;div&gt;&lt;p&gt;Hello, world&lt;/p&gt;&lt;/div&gt;&quot;</span></span></code></pre></div>
</div>
</section>
<section id="higher-order-functions" class="slide level1">
<h1>Higher-order functions</h1>
<div>
<ul>
<li class="fragment">Вече видяхме, че са функциите нормални стойности</li>
<li class="fragment">Което означава, че можем да ги подаваме на други функции или да ги връщаме като резултати</li>
</ul>
<div class="fragment">
<blockquote>
<p>Дефиниция - Функции, които приемат функции като параметри или връщат функции като резултат</p>
</blockquote>
</div>
</div>
</section>
<section id="пример" class="slide level1">
<h1>Пример</h1>
<div class="sourceCode" id="cb24"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">formatResult</span><span class="op">(</span>name<span class="op">:</span> String<span class="op">,</span> n<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> f<span class="op">:</span> <span class="dt">Int</span> <span class="op">=&gt;</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="ss">s&quot;</span><span class="st">The </span><span class="ss">$name</span><span class="st"> of </span><span class="ss">$n</span><span class="st"> is </span><span class="ss">${</span><span class="fu">f</span><span class="op">(</span>n<span class="op">)</span><span class="ss">}&quot;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="fu">formatResult</span><span class="op">(</span><span class="st">&quot;factorial&quot;</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> fact<span class="op">)</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co">//res2: String = &quot;The factorial of 3 is 6&quot;</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">formatResult</span><span class="op">(</span><span class="st">&quot;+1 addition&quot;</span><span class="op">,</span> <span class="dv">41</span><span class="op">,</span> addOne<span class="op">)</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="co">//res4: String = &quot;The +1 addition of 41 is 42&quot;</span></span></code></pre></div>
</section>
<section id="hofs-върху-списъци" class="slide level1">
<h1>HOFs върху списъци</h1>
</section>
<section id="filter" class="slide level1">
<h1>filter</h1>
<p><img data-src="images/04-key-fp-approaches/filter.png" /></p>
</section>
<section id="filter-1" class="slide level1">
<h1>filter</h1>
<div class="sourceCode" id="cb25"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> filter<span class="op">[</span>A<span class="op">](</span>la<span class="op">:</span> <span class="bu">List</span><span class="op">[</span>A<span class="op">],</span> p<span class="op">:</span> A <span class="op">=&gt;</span> <span class="dt">Boolean</span><span class="op">):</span> <span class="bu">List</span><span class="op">[</span>A<span class="op">]</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="co">// метод на trait Seq</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="kw">trait</span> <span class="bu">Seq</span><span class="op">[</span>A<span class="op">]:</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">filter</span><span class="op">(</span>pred<span class="op">:</span> A <span class="op">=&gt;</span> <span class="dt">Boolean</span><span class="op">):</span> <span class="bu">Seq</span><span class="op">[</span>A<span class="op">]</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">...</span></span></code></pre></div>
</section>
<section id="примери-2" class="slide level1">
<h1>Примери</h1>
<div class="sourceCode" id="cb26"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> l <span class="op">=</span> <span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">)</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> isEven <span class="op">=</span> <span class="op">(</span>x<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> x <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>l<span class="op">.</span><span class="fu">filter</span><span class="op">(</span>isEven<span class="op">)</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co">// res0: List[Int] = List(2, 4, 6)</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>l<span class="op">.</span><span class="fu">filter</span><span class="op">(</span>x <span class="op">=&gt;</span> x <span class="op">&gt;</span> <span class="dv">3</span><span class="op">)</span>    <span class="co">// uses Type Inference</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a><span class="co">// res1: List[Int] = List(4, 5, 6)</span></span></code></pre></div>
<div class="fragment">
<p>За създаване на ламбда може да използваме и <code>_</code> (placeholder), който ще бъде попълнен с параметър</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>l<span class="op">.</span><span class="fu">filter</span><span class="op">(</span>_ <span class="op">&gt;</span> <span class="dv">3</span><span class="op">)</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">// res2: List[Int] = List(4, 5, 6)</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="st">&quot;foo&quot;</span><span class="op">,</span> <span class="st">&quot;bar&quot;</span><span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">).</span><span class="fu">filterNot</span><span class="op">(</span>_<span class="op">.</span>isEmpty<span class="op">)</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co">// res3: List[String] = List(&quot;foo&quot;, &quot;bar&quot;)</span></span></code></pre></div>
</div>
</section>
<section id="map" class="slide level1">
<h1>map</h1>
<p><img data-src="images/04-key-fp-approaches/map.png" /></p>
</section>
<section id="map-1" class="slide level1">
<h1>map</h1>
<div class="sourceCode" id="cb28"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> map<span class="op">[</span>A<span class="op">,</span> B<span class="op">](</span>la<span class="op">:</span> <span class="bu">List</span><span class="op">[</span>A<span class="op">],</span> f<span class="op">:</span> A <span class="op">=&gt;</span> B<span class="op">):</span> <span class="bu">List</span><span class="op">[</span>B<span class="op">]</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co">// метод на trait Seq</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="kw">trait</span> <span class="bu">Seq</span><span class="op">[</span>A<span class="op">]:</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> map<span class="op">[</span>B<span class="op">](</span>f<span class="op">:</span> A <span class="op">=&gt;</span> B<span class="op">):</span> <span class="bu">Seq</span><span class="op">[</span>B<span class="op">]</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">...</span></span></code></pre></div>
</section>
<section id="примери-3" class="slide level1">
<h1>Примери</h1>
<div class="sourceCode" id="cb29"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">).</span><span class="fu">map</span><span class="op">(</span>_ <span class="op">*</span> <span class="dv">2</span><span class="op">)</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="co">// res0: List[Int] = List(2, 4, 6)</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="st">&quot;foo&quot;</span><span class="op">,</span> <span class="st">&quot;bar&quot;</span><span class="op">,</span> <span class="st">&quot;baz&quot;</span><span class="op">).</span><span class="fu">map</span><span class="op">(</span>wrapWithDiv<span class="op">)</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="co">//res1: List[String] = List(&quot;&lt;div&gt;foo&lt;/div&gt;&quot;, &quot;&lt;div&gt;bar&lt;/div&gt;&quot;, &quot;&lt;div&gt;baz&lt;/div&gt;&quot;)</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="op">-</span><span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="op">-</span><span class="dv">20</span><span class="op">).</span><span class="fu">map</span><span class="op">(</span>_<span class="op">.</span>abs<span class="op">)</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="co">//res12: List[Int] = List(1, 5, 6, 20)</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">).</span><span class="fu">map</span><span class="op">(</span><span class="fu">sum</span><span class="op">(</span>_<span class="op">,</span> <span class="dv">1</span><span class="op">))</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="co">//res11: List[Int] = List(2, 3, 4)</span></span></code></pre></div>
</section>
<section id="имплементация" class="slide level1">
<h1>Имплементация</h1>
<div class="sourceCode" id="cb30"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> filter<span class="op">[</span>A<span class="op">](</span>la<span class="op">:</span> <span class="bu">List</span><span class="op">[</span>A<span class="op">],</span> p<span class="op">:</span> A <span class="op">=&gt;</span> <span class="dt">Boolean</span><span class="op">):</span> <span class="bu">List</span><span class="op">[</span>A<span class="op">]</span> <span class="op">=</span> <span class="op">???</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> map<span class="op">[</span>A<span class="op">,</span> B<span class="op">](</span>la<span class="op">:</span> <span class="bu">List</span><span class="op">[</span>A<span class="op">],</span> f<span class="op">:</span> A <span class="op">=&gt;</span> B<span class="op">):</span> <span class="bu">List</span><span class="op">[</span>B<span class="op">]</span> <span class="op">=</span> <span class="op">???</span></span></code></pre></div>
</section>
<section id="chaining" class="slide level1">
<h1>chaining</h1>
<div class="sourceCode" id="cb31"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="st">&quot;foo&quot;</span><span class="op">,</span> <span class="st">&quot;bar&quot;</span><span class="op">,</span> <span class="st">&quot;bazzzz&quot;</span><span class="op">)</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">filter</span><span class="op">(</span>_<span class="op">.</span>size <span class="op">&lt;</span> <span class="dv">5</span><span class="op">)</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">map</span><span class="op">(</span>wrapWithP<span class="op">)</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">map</span><span class="op">(</span>wrapWithDiv<span class="op">)</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co">// res0: List[String] = List(&quot;&lt;div&gt;&lt;p&gt;foo&lt;/div&gt;&lt;/div&gt;&quot;, &quot;&lt;div&gt;&lt;p&gt;bar&lt;/div&gt;&lt;/div&gt;&quot;)</span></span></code></pre></div>
</section>
<section id="синтаксис-с-блок" class="slide level1">
<h1>Синтаксис с блок</h1>
<div class="sourceCode" id="cb32"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">)</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">map</span><span class="op">(</span>complexCalc<span class="op">)</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span>filter <span class="op">{</span> c <span class="op">=&gt;</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">val</span> limit <span class="op">=</span> <span class="fu">getLimit</span><span class="op">(</span>c<span class="op">)</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    c <span class="op">&lt;</span> limit</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span></code></pre></div>
</section>
<section id="reduce" class="slide level1">
<h1>reduce</h1>
<p><img data-src="images/04-key-fp-approaches/reduce.png" /></p>
</section>
<section id="reduce-1" class="slide level1">
<h1>reduce</h1>
<div class="sourceCode" id="cb33"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> reduce<span class="op">[</span>A<span class="op">](</span>la<span class="op">:</span> <span class="bu">List</span><span class="op">[</span>A<span class="op">],</span> f<span class="op">:</span> <span class="op">(</span>A<span class="op">,</span> A<span class="op">)</span> <span class="op">=&gt;</span> A<span class="op">):</span> A</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="kw">trait</span> <span class="bu">Seq</span><span class="op">[</span>A<span class="op">]:</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> <span class="fu">reduce</span><span class="op">(</span>op<span class="op">:</span> <span class="op">(</span>A<span class="op">,</span> A<span class="op">)</span> ⇒ A<span class="op">):</span> A</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">...</span></span></code></pre></div>
</section>
<section id="примери-4" class="slide level1">
<h1>Примери</h1>
<div class="sourceCode" id="cb34"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">).</span><span class="fu">reduce</span><span class="op">((</span>x<span class="op">,</span> y<span class="op">)</span> <span class="op">=&gt;</span> x <span class="op">+</span> y<span class="op">)</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">// res1: Int = 6</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="op">-</span><span class="dv">50</span><span class="op">,</span> <span class="op">-</span><span class="dv">100</span><span class="op">,</span> <span class="dv">200</span><span class="op">).</span><span class="fu">reduce</span><span class="op">(</span>Math<span class="op">.</span>min<span class="op">)</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">// res2: Int = -100</span></span></code></pre></div>
<div class="fragment">
<p>Може да използваме <code>_</code> и за повече от един параметър</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">).</span><span class="fu">reduce</span><span class="op">(</span>_ <span class="op">+</span> _<span class="op">)</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co">// res1: Int = 6</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="op">-</span><span class="dv">50</span><span class="op">,</span> <span class="op">-</span><span class="dv">100</span><span class="op">,</span> <span class="dv">200</span><span class="op">).</span><span class="fu">reduce</span><span class="op">(</span>_ max _<span class="op">)</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="co">// res2: Int = 200</span></span></code></pre></div>
</div>
</section>
<section id="допълнителни-ресурси" class="slide level1">
<h1>Допълнителни ресурси</h1>
<ul>
<li><a href="https://alvinalexander.com/scala/fp-book-diffs-val-def-scala-functions/">Scala: The Differences Between <code>val</code> and <code>def</code> When Creating Functions</a></li>
<li><a href="https://alvinalexander.com/scala/fp-book/partially-applied-functions-currying-in-scala/">Partially-Applied Functions (and Currying) in Scala</a></li>
</ul>
</section>
<section id="множество-списъци-с-параметри" class="slide level1">
<h1>Множество списъци с параметри</h1>
<div class="fragment">
<div class="sourceCode" id="cb36"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">sum</span><span class="op">(</span>a<span class="op">:</span> <span class="dt">Int</span><span class="op">)(</span>b<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=</span> a <span class="op">+</span> b</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span><span class="op">(</span><span class="dv">10</span><span class="op">)(</span><span class="dv">20</span><span class="op">)</span> <span class="co">// 30</span></span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb37"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">).</span><span class="fu">map</span><span class="op">(</span><span class="fu">sum</span><span class="op">(</span><span class="dv">10</span><span class="op">))</span> <span class="co">// List(11, 12, 13, 14, 15)</span></span></code></pre></div>
</div>
</section>
<section id="но-защо-ни-е" class="slide level1">
<h1>Но защо ни е?</h1>
<p><img data-src="images/but-why.gif" /></p>
</section>
<section id="групиране-на-параметри" class="slide level1">
<h1>Групиране на параметри</h1>
<div class="fragment">
<div class="sourceCode" id="cb38"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> min<span class="op">[</span>T<span class="op">](</span>compare<span class="op">:</span> <span class="op">(</span>T<span class="op">,</span> T<span class="op">)</span> <span class="op">=&gt;</span> <span class="dt">Int</span><span class="op">)(</span>a<span class="op">:</span> T<span class="op">,</span> b<span class="op">:</span> T<span class="op">)</span> <span class="op">=</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="fu">compare</span><span class="op">(</span>a<span class="op">,</span> b<span class="op">)</span> <span class="op">&lt;</span> <span class="dv">0</span> <span class="cf">then</span> a</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> b</span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb39"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span><span class="op">(</span>Integer<span class="op">.</span>compare<span class="op">)(-</span><span class="dv">10</span><span class="op">,</span> <span class="op">-</span><span class="dv">20</span><span class="op">)</span> <span class="co">// -20</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> compareByAbsoluteValue <span class="op">=</span> <span class="op">(</span>a<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> b<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> a<span class="op">.</span>abs <span class="op">-</span> b<span class="op">.</span>abs</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span><span class="op">(</span>compareByAbsoluteValue<span class="op">)(-</span><span class="dv">10</span><span class="op">,</span> <span class="op">-</span><span class="dv">20</span><span class="op">)</span> <span class="co">// -10</span></span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb40"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> minByAbsoluteValue <span class="op">=</span> <span class="fu">min</span><span class="op">(</span>compareByAbsoluteValue<span class="op">)</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">minByAbsoluteValue</span><span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">)</span> <span class="co">// 10</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="fu">minByAbsoluteValue</span><span class="op">(-</span><span class="dv">10</span><span class="op">,</span> <span class="op">-</span><span class="dv">20</span><span class="op">)</span> <span class="co">// -10</span></span></code></pre></div>
</div>
<div class="fragment">
<p>Приложимо е и при параметри на класове</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> <span class="fu">MyClass</span><span class="op">(</span>service1<span class="op">:</span> Service1<span class="op">,</span> service2<span class="op">:</span> Service2<span class="op">,</span> service3<span class="op">:</span> Service3<span class="op">)</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>             <span class="op">(</span>config1<span class="op">:</span> Config1<span class="op">,</span> config2<span class="op">:</span> Config2<span class="op">):</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span></code></pre></div>
</div>
</section>
<section id="type-inference-работи-списък-по-списък" class="slide level1">
<h1>Type inference работи списък по списък</h1>
<div class="fragment">
<div class="sourceCode" id="cb42"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mapSL<span class="op">[</span>A<span class="op">,</span> B<span class="op">](</span>xs<span class="op">:</span> <span class="bu">List</span><span class="op">[</span>A<span class="op">],</span> f<span class="op">:</span> A <span class="op">=&gt;</span> B<span class="op">):</span> <span class="bu">List</span><span class="op">[</span>B<span class="op">]</span> <span class="op">=</span> <span class="op">???</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mapSL</span><span class="op">(</span><span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">),</span> n <span class="op">=&gt;</span> n <span class="op">*</span> n<span class="op">)</span> <span class="co">// error: missing parameter type</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mapSL</span><span class="op">(</span><span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">),</span> _ <span class="op">*</span> <span class="dv">2</span><span class="op">)</span> <span class="co">// error: missing parameter type</span></span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb43"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapSL</span><span class="op">(</span><span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">),</span> <span class="op">(</span>n<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> n <span class="op">*</span> n<span class="op">)</span> <span class="co">// работи</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mapSL</span><span class="op">(</span><span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">),</span> <span class="op">(</span>_<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">*</span> <span class="dv">2</span><span class="op">)</span> <span class="co">// работи</span></span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb44"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> mapML<span class="op">[</span>A<span class="op">,</span> B<span class="op">](</span>xs<span class="op">:</span> <span class="bu">List</span><span class="op">[</span>A<span class="op">])(</span>f<span class="op">:</span> A <span class="op">=&gt;</span> B<span class="op">):</span> <span class="bu">List</span><span class="op">[</span>B<span class="op">]</span> <span class="op">=</span> <span class="op">???</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mapML</span><span class="op">(</span><span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">))(</span>n <span class="op">=&gt;</span> n <span class="op">*</span> n<span class="op">)</span> <span class="co">// работи</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mapML</span><span class="op">(</span><span class="bu">List</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">))(</span>_ <span class="op">*</span> <span class="dv">2</span><span class="op">)</span> <span class="co">// също работи</span></span></code></pre></div>
</div>
<div>
<ul>
<li class="fragment">Type inference-а работи на етапи от ляво надясно</li>
<li class="fragment">При <code>mapSL</code> Scala не може да определи типа на <code>n</code>, тъй като не знае типа на <code>A</code></li>
<li class="fragment">При <code>mapML</code>:
<ul>
<li class="fragment">първият списък определя типа на <code>A</code></li>
<li class="fragment">при втория <code>A</code> вече е фиксиран, което позволява да се определи <code>B</code></li>
</ul></li>
</ul>
</div>
</section>
<section id="имплементиране-на-собствени-конструкции" class="slide level1">
<h1>Имплементиране на собствени конструкции</h1>
<div class="fragment">
<div class="sourceCode" id="cb45"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapML</span><span class="op">(</span><span class="bu">List</span><span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">))(</span>_ <span class="op">*</span> <span class="dv">2</span><span class="op">)</span> <span class="co">// List(8, 10, 12)</span></span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb46"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mapML</span><span class="op">(</span><span class="bu">List</span><span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">))</span> <span class="op">{</span> n <span class="op">=&gt;</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">val</span> factN <span class="op">=</span> <span class="fu">fact</span><span class="op">(</span>n<span class="op">)</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">val</span> fibN <span class="op">=</span> <span class="fu">fib</span><span class="op">(</span>n<span class="op">)</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  factN <span class="op">+</span> fibN</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co">// List(27, 125, 728)</span></span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb47"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">).</span><span class="fu">fold</span><span class="op">(</span><span class="dv">1</span><span class="op">)(</span>_ <span class="op">*</span> _<span class="op">)</span> <span class="co">// 6000</span></span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb48"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="op">-</span><span class="dv">40</span><span class="op">,</span> <span class="dv">30</span><span class="op">).</span><span class="fu">fold</span><span class="op">(</span><span class="dv">0</span><span class="op">)</span> <span class="op">{</span> <span class="op">(</span>a<span class="op">,</span> b<span class="op">)</span> <span class="op">=&gt;</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  math<span class="op">.</span><span class="fu">max</span><span class="op">(</span>a<span class="op">.</span>abs<span class="op">,</span> b<span class="op">.</span>abs<span class="op">)</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co">// 40</span></span></code></pre></div>
</div>
</section>
<section id="имплементиране-на-собствени-конструкции-1" class="slide level1">
<h1>Имплементиране на собствени конструкции</h1>
<div class="sourceCode" id="cb49"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> Closeable <span class="op">=</span> <span class="op">{</span> <span class="kw">def</span> <span class="fu">close</span><span class="op">():</span> <span class="dt">Unit</span> <span class="op">}</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="kw">using</span><span class="op">[</span>A <span class="op">&lt;:</span> Closeable<span class="op">,</span> B<span class="op">](</span>resource<span class="op">:</span> A<span class="op">)(</span>f<span class="op">:</span> A <span class="op">=&gt;</span> B<span class="op">):</span> B <span class="op">=</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">try</span> <span class="fu">f</span><span class="op">(</span>resource<span class="op">)</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">finally</span> resource<span class="op">.</span><span class="fu">close</span><span class="op">()</span></span></code></pre></div>
<div class="fragment">
<div class="sourceCode" id="cb50"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">numberOfLines</span><span class="op">(</span>fileName<span class="op">:</span> String<span class="op">):</span> <span class="dt">Int</span> <span class="op">=</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">using</span><span class="op">(</span>Source<span class="op">.</span><span class="fu">fromFile</span><span class="op">(</span>fileName<span class="op">))</span> <span class="op">{</span> file <span class="op">=&gt;</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    file<span class="op">.</span><span class="fu">getLines</span><span class="op">().</span>size</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="fu">numberOfLines</span><span class="op">(</span><span class="st">&quot;poem.txt&quot;</span><span class="op">)</span></span></code></pre></div>
</div>
</section>
<section id="currying" class="slide level1">
<h1>Currying</h1>
<p><img data-src="images/04-key-fp-approaches/chicken-curry.jpg" class="fragment" /></p>
</section>
<section id="currying-1" class="slide level1">
<h1>Currying</h1>
<div>
<ul>
<li class="fragment"><p>currying е преобразуването на функция с много параметри към последователност от функции, всяка приемаща един параметър</p>
<div class="fragment">
<div class="sourceCode" id="cb51"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sum <span class="op">=</span> <span class="op">(</span>a<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> b<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> c<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> a <span class="op">+</span> b <span class="op">+</span> c</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sumCurried <span class="op">=</span> <span class="op">(</span>a<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> <span class="op">(</span>b<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> <span class="op">(</span>c<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> a <span class="op">+</span> b <span class="op">+</span> c</span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb52"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sumAHundredFourtyTwo <span class="op">=</span> <span class="fu">sumCurried</span><span class="op">(</span><span class="dv">100</span><span class="op">)(</span><span class="dv">42</span><span class="op">)</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co">// val sumAHundredFourtyTwo: Int =&gt; Int = $Lambda$1198/1481577195@6b909973</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sumAHundredFourtyTwo</span><span class="op">(</span><span class="dv">1000</span><span class="op">)</span> <span class="co">// 1142</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sumAHundredFourtyTwo</span><span class="op">(</span><span class="dv">2000</span><span class="op">)</span> <span class="co">// 2142</span></span></code></pre></div>
</div></li>
<li class="fragment"><p>кръстено на Haskell Curry</p></li>
<li class="fragment"><p>алтернатива на частично приложените функции</p>
<div class="fragment">
<div class="sourceCode" id="cb53"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> pencil <span class="op">=</span> <span class="op">(</span>colour<span class="op">:</span> String<span class="op">)</span> <span class="op">=&gt;</span> <span class="op">(</span>text<span class="op">:</span> String<span class="op">)</span> <span class="op">=&gt;</span> <span class="ss">s&quot;$text</span><span class="st"> in </span><span class="ss">$colour&quot;</span></span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb54"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> redPencil <span class="op">=</span> <span class="fu">pencil</span><span class="op">(</span><span class="st">&quot;red&quot;</span><span class="op">)</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">redPencil</span><span class="op">(</span><span class="st">&quot;Hello&quot;</span><span class="op">)</span> <span class="co">// Hello in red</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="fu">redPencil</span><span class="op">(</span><span class="st">&quot;:) :) :)&quot;</span><span class="op">)</span> <span class="co">// :) :) :) in red</span></span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb55"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pencil</span><span class="op">(</span><span class="st">&quot;blue&quot;</span><span class="op">)(</span><span class="st">&quot;you&quot;</span><span class="op">)</span> <span class="co">// you in blue</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="bu">List</span><span class="op">(</span><span class="st">&quot;The sky&quot;</span><span class="op">,</span> <span class="st">&quot;The sea&quot;</span><span class="op">).</span><span class="fu">map</span><span class="op">(</span><span class="fu">pencil</span><span class="op">(</span><span class="st">&quot;blue&quot;</span><span class="op">))</span> <span class="co">// List(&quot;The sky in blue&quot;, &quot;The sea in blue&quot;)</span></span></code></pre></div>
</div></li>
</ul>
</div>
</section>
<section id="операции-с-функции" class="slide level1">
<h1>Операции с функции</h1>
</section>
<section id="операции-с-функции-композиция" class="slide level1">
<h1>Операции с функции – композиция</h1>
<div class="fragment">
<div class="sourceCode" id="cb56"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> even <span class="op">=</span> <span class="op">(</span>n<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> n <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> len <span class="op">=</span> <span class="op">(</span>s<span class="op">:</span> String<span class="op">)</span> <span class="op">=&gt;</span> s<span class="op">.</span>size</span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb57"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> isEvenLen <span class="op">=</span> even compose len</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="co">// val isEvenLen: String =&gt; Boolean = scala.Function1$$Lambda$1227/1733158206@4c59c76c</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="fu">isEvenLen</span><span class="op">(</span><span class="st">&quot;Sofia University&quot;</span><span class="op">)</span> <span class="co">// true</span></span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb58"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> isEvenLen <span class="op">=</span> len andThen even</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="co">// val isEvenLen: String =&gt; Boolean = scala.Function1$$Lambda$1227/1733158206@4c59c76c</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="fu">isEvenLen</span><span class="op">(</span><span class="st">&quot;FMI&quot;</span><span class="op">)</span> <span class="co">// false</span></span></code></pre></div>
</div>
<div class="fragment">
<p>И при двата случая <code>isEvenLen</code> изразява <code>s =&gt; even(len(s))</code></p>
</div>
<div class="fragment">
<div class="sourceCode" id="cb59"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>scala<span class="op">&gt;</span> <span class="kw">val</span> isEvenLen <span class="op">=</span> len compose even</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="op">^</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>       error<span class="op">:</span> <span class="kw">type</span> mismatch<span class="op">;</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>        found   <span class="op">:</span> <span class="dt">Int</span> <span class="op">=&gt;</span> <span class="dt">Boolean</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>        required<span class="op">:</span> <span class="op">?</span> <span class="op">=&gt;</span> String</span></code></pre></div>
</div>
</section>
<section id="операции-с-функции-currying" class="slide level1">
<h1>Операции с функции – currying</h1>
<div class="fragment">
<div class="sourceCode" id="cb60"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sum <span class="op">=</span> <span class="op">(</span>a<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> b<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> c<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=</span> a <span class="op">+</span> b <span class="op">+</span> c</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sumCurried <span class="op">=</span> sum<span class="op">.</span>curried</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sumCurried</span><span class="op">(</span><span class="dv">1000</span><span class="op">)(</span><span class="dv">100</span><span class="op">)(</span><span class="dv">42</span><span class="op">)</span> <span class="co">// 1142</span></span></code></pre></div>
</div>
</section>
<section id="операции-с-функции-tupled" class="slide level1">
<h1>Операции с функции – tupled</h1>
<div class="fragment">
<div class="sourceCode" id="cb61"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sum <span class="op">=</span> <span class="op">(</span>a<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> b<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> c<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=</span> a <span class="op">+</span> b <span class="op">+</span> c</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sumTupled <span class="op">=</span> sum<span class="op">.</span>tupled</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sumTupled</span><span class="op">((</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">))</span> <span class="co">// 6</span></span></code></pre></div>
</div>
</section>
<section id="операции-с-функции-tupled-1" class="slide level1">
<h1>Операции с функции – tupled</h1>
<div class="sourceCode" id="cb62"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Map</span><span class="op">(</span><span class="dv">1</span> <span class="op">-&gt;</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">2</span> <span class="op">-&gt;</span> <span class="dv">200</span><span class="op">,</span> <span class="dv">3</span> <span class="op">-&gt;</span> <span class="dv">300</span><span class="op">).</span><span class="fu">map</span><span class="op">(</span>pair <span class="op">=&gt;</span> pair<span class="op">.</span>_2<span class="op">)</span> <span class="co">// List(100, 200, 300)</span></span></code></pre></div>
<div class="fragment">
<div class="sourceCode" id="cb63"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> sum <span class="op">=</span> <span class="op">(</span>a<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> b<span class="op">:</span> <span class="dt">Int</span><span class="op">)</span> <span class="op">=&gt;</span> a <span class="op">+</span> b</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Map</span><span class="op">(</span><span class="dv">1</span> <span class="op">-&gt;</span> <span class="dv">100</span><span class="op">,</span> <span class="dv">2</span> <span class="op">-&gt;</span> <span class="dv">200</span><span class="op">,</span> <span class="dv">3</span> <span class="op">-&gt;</span> <span class="dv">300</span><span class="op">).</span><span class="fu">map</span><span class="op">(</span>sum<span class="op">.</span>tupled<span class="op">)</span> <span class="co">// List(101, 202, 303)</span></span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb64"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Map</span><span class="op">(</span><span class="dv">1</span> <span class="op">-&gt;</span> <span class="st">&quot;One&quot;</span><span class="op">,</span> <span class="dv">2</span> <span class="op">-&gt;</span> <span class="st">&quot;Two&quot;</span><span class="op">,</span> <span class="dv">3</span> <span class="op">-&gt;</span> <span class="st">&quot;Three&quot;</span><span class="op">).</span><span class="fu">map</span><span class="op">(((</span>k<span class="op">,</span> v<span class="op">)</span> <span class="op">=&gt;</span> <span class="ss">s&quot;$k</span><span class="st">: </span><span class="ss">$v&quot;</span><span class="op">).</span>tupled<span class="op">)</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="co">// Грешка: Missing parameter type. Type inference не сработва</span></span></code></pre></div>
</div>
<div class="fragment">
<div class="sourceCode" id="cb65"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="bu">Function</span><span class="op">.</span>tupled</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Map</span><span class="op">(</span><span class="dv">1</span> <span class="op">-&gt;</span> <span class="st">&quot;One&quot;</span><span class="op">,</span> <span class="dv">2</span> <span class="op">-&gt;</span> <span class="st">&quot;Two&quot;</span><span class="op">,</span> <span class="dv">3</span> <span class="op">-&gt;</span> <span class="st">&quot;Three&quot;</span><span class="op">).</span><span class="fu">map</span><span class="op">(</span><span class="fu">tupled</span><span class="op">((</span>k<span class="op">,</span> v<span class="op">)</span> <span class="op">=&gt;</span> <span class="ss">s&quot;$k</span><span class="st">: </span><span class="ss">$v&quot;</span><span class="op">))</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co">// List(1: One, 2: Two, 3: Three)</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="co">// Type inference сработва успешно (от ляво надясно)</span></span></code></pre></div>
</div>
<div class="fragment">
<p>Scala 3 прави последното автоматично без нужда от <a href="https://scala-lang.org/api/3.x/scala/Function$.html#tupled-eb2"><code>tupled</code></a>:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Map</span><span class="op">(</span><span class="dv">1</span> <span class="op">-&gt;</span> <span class="st">&quot;One&quot;</span><span class="op">,</span> <span class="dv">2</span> <span class="op">-&gt;</span> <span class="st">&quot;Two&quot;</span><span class="op">,</span> <span class="dv">3</span> <span class="op">-&gt;</span> <span class="st">&quot;Three&quot;</span><span class="op">).</span><span class="fu">map</span><span class="op">((</span>k<span class="op">,</span> v<span class="op">)</span> <span class="op">=&gt;</span> <span class="ss">s&quot;$k</span><span class="st">: </span><span class="ss">$v&quot;</span><span class="op">)</span></span></code></pre></div>
</div>
</section>
<section id="композиция" class="slide level1">
<h1>Композиция</h1>
<div>
<ul>
<li class="fragment">Един от основните идеали в програмирането</li>
<li class="fragment">ФП помага изключително
<ul>
<li class="fragment">декларативност и referential transparency</li>
<li class="fragment">лесно за проследяване и reasoning</li>
<li class="fragment">лесно е да вземем две частички и да ги сглобим (даже компилатора помага с типовете)</li>
</ul></li>
<li class="fragment">Основна наша цел при ФП стил</li>
<li class="fragment">Ще си говорим за това през целия курс</li>
</ul>
</div>
<div class="fragment">
<p><img data-src="images/04-key-fp-approaches/lego-blocks.jpg" height="240" /> <img data-src="images/04-key-fp-approaches/building-blocks.webp" height="240" /></p>
</div>
</section>
<section id="композиция-1" class="slide level1">
<h1>Композиция</h1>
<p><a href="https://david-peter.de/cube-composer/">Cube Composer</a></p>
</section>
<section id="неизменимост" class="slide level1">
<h1>Неизменимост</h1>
</section>
<section id="неизменими-обекти-във-времето" class="slide level1">
<h1>Неизменими обекти във времето</h1>
<div class="sourceCode" id="cb67"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="kw">class</span> <span class="fu">Person</span><span class="op">(</span>name<span class="op">:</span> String<span class="op">,</span> age<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> address<span class="op">:</span> Address<span class="op">)</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="kw">class</span> <span class="fu">Address</span><span class="op">(</span>country<span class="op">:</span> String<span class="op">,</span> city<span class="op">:</span> String<span class="op">,</span> street<span class="op">:</span> String<span class="op">)</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">getOlder</span><span class="op">(</span>person<span class="op">:</span> Person<span class="op">):</span> Person <span class="op">=</span> person<span class="op">.</span><span class="fu">copy</span><span class="op">(</span>age <span class="op">=</span> person<span class="op">.</span>age <span class="op">+</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> youngRadost <span class="op">=</span> <span class="fu">Person</span><span class="op">(</span><span class="st">&quot;Radost&quot;</span><span class="op">,</span> <span class="dv">24</span><span class="op">,</span> <span class="fu">Address</span><span class="op">(</span><span class="st">&quot;Bulgaria&quot;</span><span class="op">,</span> <span class="st">&quot;Veliko Tarnovo&quot;</span><span class="op">,</span> <span class="st">&quot;ul. Roza&quot;</span><span class="op">))</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> olderRadost <span class="op">=</span> <span class="fu">getOlder</span><span class="op">(</span>radost<span class="op">)</span></span></code></pre></div>
<div class="fragment">
<p>Неизменимосттa ни позволява:</p>
<div>
<ul>
<li class="fragment">Persistence (персистентност)
<ul>
<li class="fragment">и двата обекта (<code>youngRadost</code> и <code>olderRadost</code>) остават валидни</li>
</ul></li>
<li class="fragment">Structural sharing
<ul>
<li class="fragment">и споделят голяма част от вътрешните си обекти</li>
</ul></li>
</ul>
</div>
</div>
</section>
<section id="неизменими-обекти-във-времето-1" class="slide level1">
<h1>Неизменими обекти във времето</h1>
<div class="sourceCode" id="cb68"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="kw">class</span> <span class="fu">Person</span><span class="op">(</span>name<span class="op">:</span> String<span class="op">,</span> age<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> address<span class="op">:</span> Address<span class="op">)</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="kw">class</span> <span class="fu">Address</span><span class="op">(</span>country<span class="op">:</span> String<span class="op">,</span> city<span class="op">:</span> String<span class="op">,</span> street<span class="op">:</span> String<span class="op">)</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> <span class="fu">getOlder</span><span class="op">(</span>person<span class="op">:</span> Person<span class="op">):</span> Person <span class="op">=</span> person<span class="op">.</span><span class="fu">copy</span><span class="op">(</span>age <span class="op">=</span> person<span class="op">.</span>age <span class="op">+</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> youngRadost <span class="op">=</span> <span class="fu">Person</span><span class="op">(</span><span class="st">&quot;Radost&quot;</span><span class="op">,</span> <span class="dv">24</span><span class="op">,</span> <span class="fu">Address</span><span class="op">(</span><span class="st">&quot;Bulgaria&quot;</span><span class="op">,</span> <span class="st">&quot;Veliko Tarnovo&quot;</span><span class="op">,</span> <span class="st">&quot;ul. Roza&quot;</span><span class="op">))</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> olderRadost <span class="op">=</span> <span class="fu">getOlder</span><span class="op">(</span>radost<span class="op">)</span></span></code></pre></div>
<p><img data-src="images/04-key-fp-approaches/shared-objects.jpg" height="380" /></p>
</section>
<section id="неизменими-структури-от-данни-списък" class="slide level1">
<h1>Неизменими структури от данни – списък</h1>
<div class="sourceCode" id="cb69"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> a <span class="op">=</span> <span class="bu">List</span><span class="op">(</span><span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">1</span><span class="op">)</span></span></code></pre></div>
<div class="fragment">
<p><img data-src="images/04-key-fp-approaches/list.jpg" height="120" /></p>
</div>
</section>
<section id="неизменими-структури-от-данни-списък-1" class="slide level1">
<h1>Неизменими структури от данни – списък</h1>
<div class="sourceCode" id="cb70"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> a <span class="op">=</span> <span class="bu">List</span><span class="op">(</span><span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> b <span class="op">=</span> <span class="dv">4</span> <span class="op">::</span> a</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> c <span class="op">=</span> <span class="dv">5</span> <span class="op">::</span> a<span class="op">.</span>tail</span></code></pre></div>
<div class="fragment">
<p><img data-src="images/04-key-fp-approaches/multple-lists.jpg" height="240" /></p>
</div>
<div>
<ul>
<li class="fragment">Persistence</li>
<li class="fragment">Structural sharing</li>
<li class="fragment">Ако някоя променлива излезе от scope GC ще се погрижи за ненужните части</li>
</ul>
</div>
</section>
<section id="списък-от-цели-числа" class="slide level1">
<h1>Списък от цели числа</h1>
<div class="sourceCode" id="cb71"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="kw">trait</span> IntList <span class="op">{</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> head<span class="op">:</span> <span class="dt">Int</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> tail<span class="op">:</span> IntList</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="kw">class</span> <span class="fu">Cons</span><span class="op">(</span>head<span class="op">:</span> <span class="dt">Int</span><span class="op">,</span> tail<span class="op">:</span> IntList<span class="op">)</span> <span class="kw">extends</span> IntList</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="kw">object</span> Nil <span class="kw">extends</span> IntList <span class="op">{</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> head <span class="op">=</span> <span class="cf">throw</span> <span class="kw">new</span> NoSuchElementException</span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> tail <span class="op">=</span> <span class="cf">throw</span> <span class="kw">new</span> UnsupportedOperationException</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<div class="fragment">
<div class="sourceCode" id="cb72"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> xs <span class="op">=</span> <span class="fu">Cons</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="fu">Cons</span><span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="fu">Cons</span><span class="op">(</span><span class="dv">3</span><span class="op">,</span> Nil<span class="op">)))</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>xs<span class="op">.</span>tail<span class="op">.</span>head <span class="co">// 2</span></span></code></pre></div>
</div>
</section>
<section id="добавяне-на-елемент-в-края-на-списък" class="slide level1">
<h1>Добавяне на елемент в края на списък</h1>
<div class="sourceCode" id="cb73"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> a <span class="op">=</span> <span class="bu">List</span><span class="op">(</span><span class="dv">3</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> d <span class="op">=</span> a <span class="op">:+</span> <span class="dv">0</span></span></code></pre></div>
<div class="fragment">
<p><img data-src="images/04-key-fp-approaches/list-append.jpg" height="240" /></p>
</div>
<div class="fragment">
<p>Тук вече няма как да споделим общите елементи</p>
</div>
</section>
<section id="вектор-оптимизация-за-произволен-достъп" class="slide level1">
<h1>Вектор – оптимизация за произволен достъп</h1>
<div class="sourceCode" id="cb74"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> v1 <span class="op">=</span> <span class="fu">Vector</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">)</span></span></code></pre></div>
<div class="fragment">
<p><img data-src="images/04-key-fp-approaches/vector.jpg" height="380" /></p>
</div>
<div class="fragment">
<p>балансирано дърво</p>
</div>
</section>
<section id="вектор-операции" class="slide level1">
<h1>Вектор – операции</h1>
<div class="sourceCode" id="cb75"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> v1 <span class="op">=</span> <span class="fu">Vector</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">)</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>v1<span class="op">.</span>head <span class="co">// 1</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>v1<span class="op">.</span>last <span class="co">// 7</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="fu">v1</span><span class="op">(</span><span class="dv">4</span><span class="op">)</span> <span class="co">// 5</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="co">// Трите операции имат еднаква сложност</span></span></code></pre></div>
<div class="fragment">
<p><img data-src="images/04-key-fp-approaches/vector.jpg" height="380" /></p>
</div>
</section>
<section id="вектор-замяна-на-елемент" class="slide level1">
<h1>Вектор – замяна на елемент</h1>
<div class="sourceCode" id="cb76"><pre class="sourceCode scala"><code class="sourceCode highlightscala"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> v1 <span class="op">=</span> <span class="fu">Vector</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">)</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="kw">val</span> v2 <span class="op">=</span> v1<span class="op">.</span><span class="fu">updated</span><span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">42</span><span class="op">)</span></span></code></pre></div>
<div class="fragment">
<p><img data-src="images/04-key-fp-approaches/vector-update.jpg" height="420" /></p>
</div>
</section>
<section id="вектор" class="slide level1">
<h1>Вектор</h1>
<div>
<ul>
<li class="fragment">Дърво с 32 деца на всеки възел</li>
<li class="fragment">Така повечето му операции са със сложност log<sub>32</sub>n
<ul>
<li class="fragment">Което се смята за почти константа (<a href="https://docs.scala-lang.org/overviews/collections/performance-characteristics.html">ефективно константа</a>)</li>
</ul></li>
<li class="fragment">Полезно ако имаме нужда от произволен достъп</li>
<li class="fragment">Имплементира Radix Balanced Tree</li>
<li class="fragment">Примери за още операции <a href="https://docs.google.com/presentation/d/1GY0p2P-BzPfWspKoMRxOQ87fG01t4oMJ1PJxjxGFurQ/edit">тук</a></li>
</ul>
</div>
</section>
<section id="чисто-функционални-структури-от-данни" class="slide level1">
<h1>Чисто функционални структури от данни</h1>
<div>
<ul>
<li class="fragment">Разучаването им започва силно през 90-те
<ul>
<li class="fragment"><a href="https://www.cambridge.org/core/books/purely-functional-data-structures/0409255DA1B48FA731859AC72E34D494">“Purely Functional Data Structures”, Chris Okasaki</a></li>
</ul></li>
<li class="fragment">Популяризирани чрез Clojure
<ul>
<li class="fragment"><a href="https://www.infoq.com/presentations/Value-Values/">“The Value of Values”, Rich Hickey</a></li>
</ul></li>
<li class="fragment">Persistence</li>
<li class="fragment">Structural sharing</li>
<li class="fragment">Подпомагани от GC</li>
<li class="fragment">Безопасно споделяне със всяка част от кода
<ul>
<li class="fragment">дори между нишки</li>
<li class="fragment">(~)константно създаване на производна структура – например с допълнителен елемент</li>
</ul></li>
</ul>
</div>
</section>
<section id="set-и-map" class="slide level1">
<h1>Set и Map</h1>
<div>
<ul>
<li class="fragment">Подобно на Vector, също използват дърво, по-точно Trie</li>
<li class="fragment"><a href="https://lampwww.epfl.ch/papers/idealhashtrees.pdf">Hash array mapped trie (HAMT)</a></li>
<li class="fragment">От Scala 2.13 – <a href="https://core.ac.uk/download/pdf/192654061.pdf">оптимизация</a></li>
<li class="fragment">Повечето им операции също са <a href="https://docs.scala-lang.org/overviews/collections/performance-characteristics.html">ефективно константа</a></li>
<li class="fragment">До 4 елемента се пазят в масив</li>
</ul>
</div>
</section>
<section id="въпроси" class="slide level1">
<h1>Въпроси :)?</h1>
</section>
    </div>
  </div>

  <script src="reveal-js/dist/reveal.js"></script>

  <!-- reveal.js plugins -->
  <script src="reveal-js/plugin/notes/notes.js"></script>
  <script src="reveal-js/plugin/search/search.js"></script>
  <script src="reveal-js/plugin/zoom/zoom.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // reveal.js plugins
        plugins: [
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
